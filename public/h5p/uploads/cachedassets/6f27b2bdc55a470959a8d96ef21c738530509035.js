!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";H5P.SimpleMultiChoice=n(1).default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(3);var u=n(2),l=i(u),h=0,d=function(e){function t(e){var n=e.question,i=e.alternatives,c=void 0===i?[]:i,s=e.inputType,u=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});a(this,t);var d=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return d.uniqueName="h5p-simple-multiple-choice-"+h,h+=1,d.listItems=[],d.feedbackElements=[],d.state=c.map(function(e,t){return{id:t,text:e.text,checked:!1}}),d.hasFeedback=c.some(function(e){return e.feedback.chosenFeedback||e.feedback.notChosenFeedback}),d.feedbackShown=!1,d.xapiGenerator=new l.default({question:n,alternatives:c}),d.attach=function(e){var t=document.createElement("div");t.className="h5p-simple-multiple-choice";var n=document.createElement("div");n.classList.add("h5p-simple-multiple-choice-question"),n.classList.add("h5p-subcontent-question");var i=this.createQuestion(this.uniqueName);n.appendChild(i),t.appendChild(n);var a=this.createAlternativesList(this.uniqueName);t.appendChild(a),e.get(0).appendChild(t)},d.createQuestion=function(e){var t=document.createElement("div");return t.id=e,t.innerHTML=n,t},d.handleInputChange=function(e){this.feedbackShown&&(this.feedbackElements.forEach(function(e){e.parentNode.removeChild(e)}),this.feedbackElements=[],this.feedbackShown=!1,this.trigger("allow-finish-changed")),this.state=this.state.map(function(t,n){var i=n===e;return"radio"!==s&&(i=n===e?!t.checked:t.checked),o({},t,{checked:i})}),this.trigger("changed");var t=this.createXAPIEventTemplate("interacted"),n=this.xapiGenerator.generateXApi(t,this.state);this.trigger(n)},d.createAlternativesList=function(e){var t=this;if(!this.state.length){var n=document.createElement("div");return n.className="h5p-simple-multiple-choice-alternatives-error",n.textContent="ERROR: No alternatives chosen",n}var i=document.createElement("ul");return i.classList.add("h5p-simple-multiple-choice-alternatives"),i.classList.add("h5p-subcontent-body"),i.setAttribute("role","listbox"),i.setAttribute("aria-labelledby",e),this.state.forEach(function(e){var n=e.id,a=e.text,r=e.checked,c=document.createElement("li");c.className="h5p-simple-multiple-choice-alternative-li";var o=document.createElement("label"),u=document.createElement("input");u.className="h5p-simple-multiple-choice-alternative-input",u.type=s||"checkbox",u.name=t.uniqueName,r&&u.setAttribute("checked","checked"),o.addEventListener("change",t.handleInputChange.bind(t,n)),o.appendChild(u),o.innerHTML+=a,c.appendChild(o),i.appendChild(c),t.listItems.push(c)}),i},d.getCurrentState=function(){return l.default.getResultPattern(this.state)},d.restorePreviousState=function(){var e=this;if(u.previousState){var t=u.previousState.split("[,]");t.forEach(function(t){e.state[t].checked=!0})}},d.allowFinish=function(){return this.hasFeedback?this.hasFeedback&&this.feedbackShown?t.AllowFinish.ALLOW:t.AllowFinish.DENY:t.AllowFinish.ALWAYS},d.finish=function(){var e=this;return c.forEach(function(t,n){if(t.feedback){var i=void 0,a=e.state[n].checked;if(a&&t.feedback.chosenFeedback?i=t.feedback.chosenFeedback:!a&&t.feedback.notChosenFeedback&&(i=t.feedback.notChosenFeedback),i){var r=document.createElement("div");r.className="h5p-simple-multiple-choice-alternative-feedback "+(a?"chosen":"not-chosen"),r.innerHTML=i,e.feedbackElements.push(r),e.listItems[n].appendChild(r)}}}),this.feedbackShown=!0,0===this.feedbackElements.length},d.restorePreviousState(),d}return c(t,e),s(t,null,[{key:"AllowFinish",get:function(){return{ALWAYS:0,DENY:1,ALLOW:2}}}]),t}(H5P.EventDispatcher);t.default=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var i=t.question,a=t.alternatives;n(this,e);var r=a.map(function(e,t){return{id:""+t,description:{"en-US":e.text}}});this.event={description:{"en-US":i},type:"http://adlnet.gov/expapi/activities/cmi.interaction",interactionType:"choice",choices:r}}return a(e,[{key:"generateXApi",value:function(t,n){var a=e.getResultPattern(n),r=t.data.statement;if(i(r,{result:{response:a}}),r.object){var c=r.object.definition;i(c,this.event)}return t}}],[{key:"getResultPattern",value:function(e){return e.reduce(function(e,t,n){return t.checked&&(e+=(e.length?"[,]":"")+n),e},"")}}]),e}();t.default=r},function(e,t){}]);;
!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";H5P.OpenEndedQuestion=n(1).default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n(3);var u=n(2),c=r(u),s=function(e){function t(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=e.question,u=void 0===a?"Do you like cake?":a,s=e.placeholderText,p=void 0===s?"":s,d=e.inputRows,l=void 0===d?1:d;return r.currentInput="",r.xApiGenerator=new c.default(u),r.createQuestion=function(e){var t=document.createElement("div");return t.className="h5p-open-ended-question-text",t.innerHTML=e,t},r.createInput=function(e,t){var n=document.createElement("textarea");return n.innerHTML=t||"",n.placeholder=n.innerText,n.textContent=this.currentInput,n.rows=e,n.style.resize="none",n},r.attach=function(e){var t=this,n=document.createElement("div");n.classList.add("h5p-open-ended-question");var r=document.createElement("div");r.classList.add("h5p-open-ended-question-question"),r.classList.add("h5p-subcontent-question");var o=this.createQuestion(u);r.appendChild(o);var i=document.createElement("div");i.classList.add("h5p-open-ended-question-content"),i.classList.add("h5p-subcontent-body");var a=this.createInput(l,p);a.className="h5p-open-ended-question-input",a.addEventListener("blur",function(){var e=t.createXAPIEventTemplate("interacted"),n=t.xApiGenerator.generateXApi(e,a.value);t.currentInput=a.value,t.trigger(n)}),a.addEventListener("keydown",function(){return t.trigger("changed")}),i.appendChild(a),n.appendChild(r),n.appendChild(i),e.get(0).appendChild(n)},r.getCurrentState=function(){return this.currentInput},r.restorePreviousState=function(){n.previousState&&(this.currentInput=n.previousState)},r.restorePreviousState(),r}return a(t,e),t}(H5P.EventDispatcher);t.default=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.event={description:{"en-US":t},type:"http://adlnet.gov/expapi/activities/cmi.interaction",interactionType:"fill-in"}}return o(e,[{key:"generateXApi",value:function(e,t){var n=e.data.statement;if(r(n,{result:{response:t}}),n.object){var o=n.object.definition;r(o,this.event)}return e}}]),e}();t.default=i},function(e,t){}]);;
var H5P = H5P || {};

/**
 * Constructor.
 *
 * @param {Object} params Options for this library.
 * @param {Number} id Content identifier
 * @returns {undefined}
 */
(function ($) {
  H5P.Image = function (params, id, extras) {
    H5P.EventDispatcher.call(this);
    this.extras = extras;

    if (params.file === undefined || !(params.file instanceof Object)) {
      this.placeholder = true;
    }
    else {
      this.source = H5P.getPath(params.file.path, id);
      this.width = params.file.width;
      this.height = params.file.height;
    }

    this.alt = params.alt !== undefined ? params.alt : 'New image';

    if (params.title !== undefined) {
      this.title = params.title;
    }
  };

  H5P.Image.prototype = Object.create(H5P.EventDispatcher.prototype);
  H5P.Image.prototype.constructor = H5P.Image;

  /**
   * Wipe out the content of the wrapper and put our HTML in it.
   *
   * @param {jQuery} $wrapper
   * @returns {undefined}
   */
  H5P.Image.prototype.attach = function ($wrapper) {
    var self = this;
    var source = this.source;

    if (self.$img === undefined) {
      if(self.placeholder) {
        self.$img = $('<div>', {
          width: '100%',
          height: '100%',
          class: 'h5p-placeholder',
          title: this.title === undefined ? '' : this.title,
          on: {
            load: function () {
              self.trigger('loaded');
            }
          }
        });
      } else {
        self.$img = $('<img>', {
          width: '100%',
          height: '100%',
          src: source,
          alt: this.alt,
          title: this.title === undefined ? '' : this.title,
          on: {
            load: function () {
              self.trigger('loaded');
            }
          }
        });
      }
    }

    $wrapper.addClass('h5p-image').html(self.$img);
  };

  return H5P.Image;
}(H5P.jQuery));
;
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";H5P.Questionnaire=n(6).default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(12);var s=function(){function e(){r(this,e)}return i(e,null,[{key:"createButton",value:function(t,n,r){var i=e.createElement("button",{className:"h5p-questionnaire-button "+n,type:"button",innerHTML:t});return r&&i.addEventListener("click",function(){r.trigger(n)}),i}},{key:"createElement",value:function(e,t){var n=document.createElement(e);return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}},{key:"createDiv",value:function(t){return e.createElement("div",t)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(14);var u=n(1),c=r(u),l=function(e){function t(e){i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.footerWrapper=document.createElement("div"),n.footerWrapper.className="h5p-questionnaire-footer",n.footerWrapper.appendChild(n.createButton(e.prevLabel,"previous")),n.footerWrapper.appendChild(n.createButton(e.nextLabel,"next")),n.footerWrapper.appendChild(n.createButton(e.continueLabel,"next","continue")),n}return a(t,e),o(t,[{key:"setForwardNavigationButton",value:function(e){this.trigger("disable-next"),this.trigger("disable-continue"),this.trigger("enable-"+e)}},{key:"createButton",value:function(e,t,n){var r=c.default.createButton(e,t,this);return this.on("enable-"+(n||t),function(){r.classList.remove("disable")}),this.on("disable-"+(n||t),function(){r.classList.add("disable")}),r}},{key:"hide",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.footerWrapper.classList[e?"add":"remove"]("hide")}},{key:"attachTo",value:function(e){e.appendChild(this.footerWrapper)}}]),t}(H5P.EventDispatcher);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(10);var s=function(){function e(t,n){r(this,e),this.numberWidget=document.createElement("div"),this.numberWidget.className="h5p-questionnaire-progress-bar-widget",this.numberWidget.setAttribute("aria-hidden","true"),this.currentIndex=document.createElement("div"),this.currentIndex.className="h5p-questionnaire-progress-bar-widget-current",this.currentIndex.textContent=t;var i=document.createElement("div");i.className="h5p-questionnaire-progress-bar-widget-separator",i.textContent="/";var s=document.createElement("div");s.className="h5p-questionnaire-progress-bar-widget-max",s.textContent=n,this.numberWidget.appendChild(this.currentIndex),this.numberWidget.appendChild(i),this.numberWidget.appendChild(s)}return i(e,[{key:"setCurrentIndex",value:function(e){this.currentIndex.textContent=e}},{key:"attachTo",value:function(e){e.appendChild(this.numberWidget)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(11);var a=n(3),o=r(a),u=function(){function e(t){var n=t.currentIndex,r=t.maxIndex,s=t.uiElements;i(this,e),this.maxIndex=r,this.uiElements=s,this.progressBar=document.createElement("div"),this.progressBar.className="h5p-questionnaire-progress-bar",this.progressBar.setAttribute("tabindex","-1"),this.progressBar.setAttribute("role","progressbar"),this.progressBar.setAttribute("aria-valuemin","0"),this.progressBar.setAttribute("aria-valuemax",r),this.updateAriaValues(n),this.currentProgress=document.createElement("div"),this.currentProgress.className="h5p-questionnaire-progress-bar-current",this.numberWidget=new o.default(n,r),this.move(n),this.progressBar.appendChild(this.currentProgress)}return s(e,[{key:"updateAriaValues",value:function(e){this.progressBar.setAttribute("aria-valuenow",e),this.progressBar.setAttribute("aria-valuetext",this.uiElements.accessibility.progressBarText.replace("%current",e).replace("%max",this.maxIndex))}},{key:"move",value:function(e){this.numberWidget.setCurrentIndex(e),this.currentProgress.style.width=e/this.maxIndex*100+"%",this.updateAriaValues(e),this.progressBar.focus()}},{key:"hide",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.progressBar.classList[e?"add":"remove"]("hide")}},{key:"attachNumberWidgetTo",value:function(e){this.numberWidget.attachTo(e)}},{key:"attachTo",value:function(e){e.appendChild(this.progressBar)}}]),e}();t.default=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){function t(e){var i=e.progressBar,s=e.params,a=e.contentId,o=e.requiredField,u=(e.index,e.uiElements);n(this,t);var c=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return c.progressBar=i,c.questionnaireElement=document.createElement("div"),c.questionnaireElement.className="h5p-questionnaire-element hide",c.instance=H5P.newRunnable(s,a,H5P.jQuery(c.questionnaireElement),void 0,{parent:c}),c.requiredField=o,c.answered=s.userDatas&&s.userDatas.state&&s.userDatas.state.length,c.attachRequiredField(o,u),c.instance.on("xAPI",c.handleInteraction.bind(c)),c.instance.on("allow-finish-changed",c.trigger.bind(c)),c.instance.on("changed",c.trigger.bind(c)),c}return i(t,e),s(t,null,[{key:"AllowFinish",get:function(){return{ALWAYS:0,DENY:1,ALLOW:2}}}]),s(t,[{key:"attachRequiredField",value:function(e,t){if(e){var n=this.questionnaireElement.querySelector(".h5p-subcontent-question");this.questionnaireElement.classList.add("h5p-questionnaire-required");var r=document.createElement("div");r.innerHTML="* "+t.requiredText,r.className="h5p-questionnaire-required-symbol",n&&n.insertBefore(r,n.firstChild)}}},{key:"handleInteraction",value:function(e){if("http://adlnet.gov/expapi/verbs/interacted"===e.data.statement.verb.id){var t=e.data.statement.result.response;t.trim&&(t=t.trim()),this.answered=!!t.length,this.trigger("handledInteraction")}}},{key:"allowFinish",value:function(){return void 0!==this.instance.allowFinish?this.instance.allowFinish():t.AllowFinish.ALWAYS}},{key:"finish",value:function(){if(this.instance.finish)return this.instance.finish()}},{key:"getCurrentState",value:function(){return this.instance.getCurrentState?this.instance.getCurrentState():null}},{key:"getElement",value:function(){return this.questionnaireElement}},{key:"isRequired",value:function(){return this.requiredField}},{key:"isAnswered",value:function(){return this.answered}},{key:"hide",value:function(e){this.questionnaireElement.classList[e?"add":"remove"]("hide")}},{key:"setActivityStarted",value:function(){this.instance.setActivityStarted&&this.instance.setActivityStarted()}}]),t}(H5P.EventDispatcher);t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(13),n(15);var u=n(9),c=r(u),l=n(8),d=r(l),h=n(7),f=r(h),p=n(2),b=r(p),v=n(4),m=r(v),g=n(5),y=r(g),w=function(e){function t(e){var n=e.questionnaireElements,r=void 0===n?[]:n,a=e.successScreenOptions,u=void 0===a?{}:a,l=e.uiElements,h=void 0===l?{}:l,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t);var g=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));g.contentId=p,g.state={questionnaireElements:[],currentIndex:0},h=H5P.jQuery.extend(!0,{buttonLabels:{prevLabel:"Back",nextLabel:"Next",submitLabel:"Submit",continueLabel:"Continue"},accessibility:{requiredTextExitLabel:"Close error message",progressBarText:"Question %current of %max"},requiredMessage:"This question requires an answer",requiredText:"required",submitScreenTitle:"You successfully answered all of the questions",submitScreenSubtitle:"Click below to submit your answers"},h),g.createQuestionnaireBody=function(){var e=this,t=document.createElement("div");return t.className="h5p-questionnaire-content",r.forEach(function(n,r){var i=n.requiredField,s=n.library,a=e.createQuestionContent(i,s,r);t.appendChild(a.getElement()),e.state.questionnaireElements.push(a)}),this.createSubmitScreen().attachTo(t),u.enableSuccessScreen&&this.createSuccessScreen().attachTo(t),t},g.createQuestionContent=function(e,t,n){var r=this,i=new y.default({progressBar:this.progressBar,params:t,contentId:this.contentId,requiredField:e,index:n,uiElements:h});return i.on("handledInteraction",function(){r.trigger("resize"),r.requiredMessage.trigger("hideMessage"),r.triggerXAPI("interacted")}),i.on("allow-finish-changed",function(){r.setForwardNavigationButton(r.state.currentIndex)}),i.on("changed",function(){r.requiredMessage.trigger("hideMessage")}),i},g.createQuestionnaire=function(){var e=document.createElement("div");if(e.className="h5p-questionnaire",1===r.length&&!r[0].library)return e.classList.add("h5p-invalid-questionnaire"),e.textContent="Invalid content",e;this.createProgressBar(r).attachTo(e);var t=this.createQuestionnaireBody();e.appendChild(t),this.requiredMessage=new f.default(h),this.requiredMessage.attachTo(e);var n=this.createFooter();return n.attachTo(e),this.state.questionnaireElements.length&&this.state.questionnaireElements[0].setActivityStarted(),this.state.finished?u.enableSuccessScreen?this.showSuccessScreen():this.showSubmitScreen():this.move(this.state.currentIndex,this.state.currentIndex>0),e},g.createSubmitScreen=function(){var e=this;return this.submitScreen=new d.default({title:h.submitScreenTitle,subtitle:h.submitScreenSubtitle,backLabel:h.buttonLabels.prevLabel,submitLabel:h.buttonLabels.submitLabel}),this.submitScreen.on("submit",this.handleSubmit.bind(this)),this.submitScreen.on("previous",function(){e.submitScreen.hide(),e.hideQuestion(!1),e.trigger("resize")}),this.submitScreen},g.hideQuestion=function(e){this.state.questionnaireElements[this.state.questionnaireElements.length-1].hide(e),this.progressBar.hide(e),this.footer.hide(e)},g.createSuccessScreen=function(){var e=this;return this.successScreen=new c.default(u,this),this.successScreen.on("imageLoaded",function(){e.trigger("resize")}),this.successScreen},g.createProgressBar=function(e){return this.progressBar=new m.default({currentIndex:this.state.currentIndex+1,maxIndex:e.length,uiElements:h}),this.progressBar},g.showSubmitScreen=function(){this.hideQuestion(!0),this.submitScreen.show(),this.trigger("resize")},g.showSuccessScreen=function(){this.hideQuestion(!0),this.submitScreen.hide(),this.successScreen.show(),this.trigger("resize")},g.handleSubmit=function(){u.enableSuccessScreen?this.showSuccessScreen():this.trigger("noSuccessScreen"),this.state.finished=!0,this.triggerXAPI("completed")},g.createFooter=function(){var e=this,t=new b.default(h.buttonLabels);return t.on("next",function(){e.move(e.state.currentIndex+1)&&e.showSubmitScreen()}),t.on("previous",function(){e.move(e.state.currentIndex-1)}),t.trigger("disable-previous"),this.footer=t,t},g.setForwardNavigationButton=function(e){if(!(e>this.state.questionnaireElements.length-1)){var t=this.state.questionnaireElements[e].allowFinish(),n=t===y.default.AllowFinish.ALLOW?"next":"continue";this.footer.setForwardNavigationButton(n)}},g.triggerRequiredQuestion=function(){this.requiredMessage.trigger("showMessage"),this.trigger("resize")},g.move=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state,r=n.currentIndex,i=n.questionnaireElements,s=i[r];if(e<0)return!1;if(!t&&e>r){if(!this.isValidAnswer(s))return this.triggerRequiredQuestion(),!1;if(s.allowFinish()===y.default.AllowFinish.DENY&&!s.finish())return this.setForwardNavigationButton(r),this.trigger("resize"),!1}if(e>i.length-1)return!0;this.footer.trigger(0===e?"disable-previous":"enable-previous"),this.setForwardNavigationButton(e),this.requiredMessage.trigger("hideMessage"),i[r].hide(!0);var a=i[e];a.hide(!1);var u=a.getElement().querySelector(".h5p-subcontent-question");if(this.progressBar.attachNumberWidgetTo(u),this.trigger("resize"),this.state=o(this.state,{currentIndex:e}),this.progressBar.move(e+1),0!==e&&0!==r){var c=this.createXAPIEventTemplate("progressed");c.data.statement.object&&(c.data.statement.object.definition.extensions["http://id.tincanapi.com/extension/ending-point"]=e+1,this.trigger(c))}return i[e].setActivityStarted(),!1},g.isValidAnswer=function(e){return!e.isRequired()||e.isAnswered()},g.attach=function(e){e.get(0).classList.add("h5p-questionnaire-wrapper"),e.get(0).appendChild(w)},g.getCurrentState=function(){var e=this.state.questionnaireElements.map(function(e){return e.getCurrentState()});return{questions:e,progress:this.state.currentIndex,finished:this.state.finished,version:1}},g.setPreviousState=function(){var e=v.previousState;if(e&&e.questions){if(this.state.finished=e.finished,e.progress){this.state.currentIndex=e.progress;var t=this.state.currentIndex>=r.length;void 0===e.version&&t&&(this.state.currentIndex=r.length-1,this.state.finished=!0)}e.questions.forEach(function(e,t){r[t].library.userDatas=r[t].library.userDatas||{},r[t].library.userDatas.state=e})}},g.setPreviousState();var w=g.createQuestionnaire();return g}return a(t,e),t}(H5P.EventDispatcher);t.default=w},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(16);var o=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.requiredElement=document.createElement("div"),n.requiredElement.classList.add("h5p-questionnaire-choice-required"),n.requiredElement.classList.add("hide"),n.requiredMessage=document.createElement("div"),n.requiredMessage.innerHTML=e.requiredMessage,n.requiredMessage.className="h5p-questionnaire-choice-required-message",n.requiredMessage.setAttribute("role","alert");var s=document.createElement("button");return s.className="h5p-questionnaire-choice-required-exit",s.setAttribute("aria-label",e.accessibility.requiredTextExitLabel),s.addEventListener("click",function(){n.hideMessage()}),n.on("hideMessage",function(){n.hideMessage()}),n.on("showMessage",function(){n.showMessage()}),n.requiredElement.appendChild(n.requiredMessage),n.requiredElement.appendChild(s),n}return s(t,e),a(t,[{key:"showMessage",value:function(){this.requiredElement.classList.remove("hide")}},{key:"hideMessage",value:function(){this.requiredElement.classList.add("hide")}},{key:"attachTo",value:function(e){e.appendChild(this.requiredElement)}}]),t}(H5P.EventDispatcher);t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(17);var u=n(1),c=r(u),l=function(e){function t(e){var n=e.title,r=e.subtitle,a=e.backLabel,o=e.submitLabel;i(this,t);var u=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.wrapper=c.default.createDiv({className:"h5p-questionnaire-submit-screen hide"}),u.wrapper.setAttribute("tabindex","-1"),u.wrapper.appendChild(c.default.createDiv({className:"h5p-questionnaire-submit-screen-title",innerHTML:n})),u.wrapper.appendChild(c.default.createDiv({className:"h5p-questionnaire-submit-screen-subtitle",innerHTML:r})),u.wrapper.appendChild(c.default.createButton(a,"previous",u)),u.wrapper.appendChild(c.default.createButton(o,"submit",u)),u.show=function(){this.wrapper.classList.remove("hide"),this.wrapper.focus()},u.hide=function(){this.wrapper.classList.add("hide")},u}return a(t,e),o(t,[{key:"attachTo",value:function(e){e.appendChild(this.wrapper)}}]),t}(H5P.EventDispatcher);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(18);var o=function(e){function t(e,n){var s=e.successScreenImage,a=void 0===s?{}:s,o=e.successMessage,u=void 0===o?"":o;r(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));c.wrapper=document.createElement("div"),c.wrapper.className="h5p-questionnaire-success",c.wrapper.setAttribute("tabindex","-1"),c.wrapper.classList.add("hide");var l=document.createElement("div");l.className="h5p-questionnaire-success-center",c.wrapper.appendChild(l);var d=document.createElement("div");if(d.className="h5p-questionnaire-success-icon",a.params&&a.params.file){d.classList.add("image");var h=H5P.newRunnable(a,n.contentId,H5P.jQuery(d),void 0,{parent:n});h.on("loaded",function(){c.trigger("imageLoaded")})}else d.classList.add("standard-icon");var f=document.createElement("div");return f.className="h5p-questionnaire-success-message",f.innerHTML=u,l.appendChild(d),l.appendChild(f),c.show=function(){this.wrapper.classList.remove("hide"),this.wrapper.focus()},c}return s(t,e),a(t,[{key:"attachTo",value:function(e){e.appendChild(this.wrapper)}}]),t}(H5P.EventDispatcher);t.default=o},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){}]);;
